#!/usr/bin/env node
'use strict';

process.bin = process.title = 'proxy';
var util = require('util');
var exec = require('child_process').exec;
console.log(__dirname);
//console.log(process);
var cwd = process.argv[1]||"";
var app = __dirname + "/../app.js";   //start file
var commond="node "+app+" "+(process.argv[2]||"")+" "+(process.argv[3]||"");  //join the needed commond argv, not list all

console.log("----prepare the scanner:");

var child = exec(commond , function (err, stdout, stderr) {
  if (err) throw err;
});
child.stdout.on('data', function (data) {
  if(data.indexOf("\n")>0){
    data=data.substring(0,data.toString().indexOf("\n"))  //remove unused new line
  }
  console.log(data);
});
child.on("exit", function (code, signal) {
  // console.log("exit child");
});

